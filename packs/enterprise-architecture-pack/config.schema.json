{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Enterprise Architecture Pack Configuration",
  "$comment": "NOTE — x-ui properties are design markers for a future configuration UI. No GUI currently renders them. Ignore for runtime/validation purposes.",
  "type": "object",
  "properties": {
    "primary_pattern": {
      "type": "string",
      "title": "Primary architectural pattern",
      "enum": [
        "modular-monolith",
        "microservices",
        "hexagonal",
        "cqrs",
        "event-sourcing",
        "layered"
      ],
      "default": "modular-monolith",
      "x-ui": { "widget": "select" }
    },
    "adr_directory": {
      "type": "string",
      "title": "ADR output directory",
      "default": "docs/adr",
      "x-ui": { "placeholder": "docs/adr" }
    },
    "adr_format": {
      "type": "string",
      "title": "ADR format",
      "enum": ["standard", "madr", "y-statements"],
      "default": "standard",
      "description": "standard: context/decision/consequences | madr: Markdown Architectural Decision Records | y-statements: In the context of..."
    },
    "c4_diagram_format": {
      "type": "string",
      "title": "C4 diagram output format",
      "enum": ["mermaid", "plantuml", "structurizr", "text"],
      "default": "mermaid"
    },
    "require_adr_for": {
      "type": "array",
      "title": "Decision types that require an ADR",
      "items": {
        "type": "string",
        "enum": [
          "database-selection",
          "authentication-mechanism",
          "caching-strategy",
          "message-queue",
          "deployment-pattern",
          "framework-selection",
          "service-boundary",
          "data-schema"
        ]
      },
      "default": [
        "database-selection",
        "authentication-mechanism",
        "deployment-pattern",
        "service-boundary"
      ]
    },
    "generate_c4_levels": {
      "type": "array",
      "title": "C4 diagram levels to generate",
      "items": {
        "type": "integer",
        "enum": [1, 2, 3, 4]
      },
      "default": [1, 2],
      "description": "L1: System Context, L2: Container, L3: Component, L4: Code"
    },
    "validation": {
      "type": "object",
      "title": "ADR Validation Settings",
      "description": "Controls the adr-validator tool (packs/enterprise-architecture-pack/validators/adr-validator/)",
      "properties": {
        "adr_validation_enabled": {
          "type": "boolean",
          "title": "Enable ADR validation before marking as Accepted",
          "default": true
        },
        "strict_mode": {
          "type": "boolean",
          "title": "Strict mode — treat warnings as errors",
          "default": false
        },
        "required_rules": {
          "type": "array",
          "title": "Rules that must pass (empty = all rules active)",
          "items": { "type": "string" },
          "default": ["ADR-STR-001", "ADR-STR-002", "ADR-ENT-001", "ADR-ENT-002", "ADR-ENT-003", "ADR-ENT-004", "ADR-ENT-005"]
        },
        "ci_format": {
          "type": "string",
          "title": "Output format for CI/CD pipeline",
          "enum": ["console", "json", "junit"],
          "default": "junit"
        }
      }
    }
  }
}
